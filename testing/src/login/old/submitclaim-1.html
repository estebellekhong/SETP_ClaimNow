
<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Profile Management</title>

	<link rel="stylesheet" href="/static/home.css">

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
	<link rel="shortcut icon" href="/static/bg/favicon.ico">
	<!-- Boxicons CDN Link -->
	<link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body class="loggedin">
	<div class="sidebar">
		<div class="logo-details">
			<i class='bx bxl-c-plus-plus icon'></i>
			<div class="logo_name">ClaimNow</div>
			<i class='bx bx-menu' id="btn"></i>
		</div>
		<ul class="nav-list">
			<li>
				<a href="/claimnow_dev/home">
					<i class='bx bx-grid-alt'></i>
					<span class="links_name">Overview</span>
				</a>
				<span class="tooltip">Overview</span>
			</li>
			<li>
				<a href="/claimnow_dev/submitclaim">

					<i class='bx bx-edit-alt'></i>
					<span class="links_name">Submit Claim</span>
				</a>
				<span class="tooltip">Submit Claim</span>
			</li>
			<li>
				<a href="/claimnow_dev/history">
					<i class='bx bx-history'></i>
					<span class="links_name">Claim History</span>
				</a>
				<span class="tooltip">Claim History</span>
			</li>

			<li>
				<a href="/claimnow_dev/notifications">
					<i class='bx bx-bell'></i>
					<span class="links_name">Notifications</span>
				</a>
				<span class="tooltip">Notifications</span>
			</li>
			<li>
				<a href="/claimnow_dev/logout">
					<i class='bx bx-log-out'></i>
					<span class="links_name">Logout</span>
				</a>
				<span class="tooltip">Logout</span>
			</li>
		</ul>
	</div>
	</ul>
	</div>
	<div class="content">
		

<div class="home-section">
  <h1>Submit a Claim</h1>

  <div class="container">
    <form action="/claimnow_dev/submitclaim" method="post">
      <h3>Claim Category</h3>
      <div class="select-box">
        <select class="radio" id="Claim_category" name="Claim_category">
          <option value="Entertainment">Entertainment</option>
          <option value="Flight">Flight</option>
          <option value="Hotel">Hotel</option>
          <option value="Transportation">Transportation</option>
        </select>
      </div>
      <br>

      <h3>Claim Date</h3>
      <div class="select-box">
        <input type="date" id="Claim_Date" name="Claim_Date">
      </div>
      <br>

      <h3>Currency Code</h3>
      <div class="select-box">
        <input id="amount" type="number" value="1" id="Foreign_Currency" name="Foreign_Currency" />

        <div class="drop-list">
          <div class="from">
            <p>From</p>
            <div class="select-box2">
              <img src="https://flagcdn.com/48x36/us.png" alt="flag" id="img" name="img">
              <select id="primary" class="input"></select>
            </div>
          </div>
          <div class="icon"><i class="fas fa-exchange-alt"></i></div>
          <div class="to">
            <p>To</p>
            <div class="select-box2">
              <img src="https://flagcdn.com/48x36/us.png" alt="flag" id="img" name="img">
              <select id="secondary" class="input"></select>
            </div>
          </div>
        </div>
        <input id="btn-convert" type="button" value="Get Exchange Rate" />
        <p>
          <span id="txt-primary"></span>
          <span id="txt-secondary"></span>
        </p>
      </div>
      <br>


      <h3>Expense Amount (Foreign Currency)</h3>
      <div class="select-box">
        <input type="number" id="Claim_Amount_FC" name="Claim_Amount_FC">
      </div>
      <br>

      <h3>Expense Amount (SGD)</h3>
      <div class="select-box">
        <input type="number" id="Claim_Amount_SGD" name="Claim_Amount_SGD">
      </div>
      <br>

      <script src="/static/submit.js"></script>
      <h3>Claim Description</h3>
      <div class="wrapper">
        <textarea spellcheck="true" placeholder="Type something here..." required id="Claim_Desc"
          name="Claim_Desc"></textarea>
      </div>
      <br>
      <div class="button">
        <a href="#" class="btn">Submit Claim</a>
      </div>
    </form>
  </div>

  <script>
    const currencies = {
      "AED": "AE",
      "AFN": "AF",
      "XCD": "AG",
      "ALL": "AL",
      "AMD": "AM",
      "ANG": "AN",
      "AOA": "AO",
      "AQD": "AQ",
      "ARS": "AR",
      "AUD": "AU",
      "AZN": "AZ",
      "BAM": "BA",
      "BBD": "BB",
      "BDT": "BD",
      "XOF": "BE",
      "BGN": "BG",
      "BHD": "BH",
      "BIF": "BI",
      "BMD": "BM",
      "BND": "BN",
      "BOB": "BO",
      "BRL": "BR",
      "BSD": "BS",
      "NOK": "BV",
      "BWP": "BW",
      "BYR": "BY",
      "BZD": "BZ",
      "CAD": "CA",
      "CDF": "CD",
      "XAF": "CF",
      "CHF": "CH",
      "CLP": "CL",
      "CNY": "CN",
      "COP": "CO",
      "CRC": "CR",
      "CUP": "CU",
      "CVE": "CV",
      "CYP": "CY",
      "CZK": "CZ",
      "DJF": "DJ",
      "DKK": "DK",
      "DOP": "DO",
      "DZD": "DZ",
      "ECS": "EC",
      "EEK": "EE",
      "EGP": "EG",
      "ETB": "ET",
      "EUR": "FR",
      "FJD": "FJ",
      "FKP": "FK",
      "GBP": "GB",
      "GEL": "GE",
      "GGP": "GG",
      "GHS": "GH",
      "GIP": "GI",
      "GMD": "GM",
      "GNF": "GN",
      "GTQ": "GT",
      "GYD": "GY",
      "HKD": "HK",
      "HNL": "HN",
      "HRK": "HR",
      "HTG": "HT",
      "HUF": "HU",
      "IDR": "ID",
      "ILS": "IL",
      "INR": "IN",
      "IQD": "IQ",
      "IRR": "IR",
      "ISK": "IS",
      "JMD": "JM",
      "JOD": "JO",
      "JPY": "JP",
      "KES": "KE",
      "KGS": "KG",
      "KHR": "KH",
      "KMF": "KM",
      "KPW": "KP",
      "KRW": "KR",
      "KWD": "KW",
      "KYD": "KY",
      "KZT": "KZ",
      "LAK": "LA",
      "LBP": "LB",
      "LKR": "LK",
      "LRD": "LR",
      "LSL": "LS",
      "LTL": "LT",
      "LVL": "LV",
      "LYD": "LY",
      "MAD": "MA",
      "MDL": "MD",
      "MGA": "MG",
      "MKD": "MK",
      "MMK": "MM",
      "MNT": "MN",
      "MOP": "MO",
      "MRO": "MR",
      "MTL": "MT",
      "MUR": "MU",
      "MVR": "MV",
      "MWK": "MW",
      "MXN": "MX",
      "MYR": "MY",
      "MZN": "MZ",
      "NAD": "NA",
      "XPF": "NC",
      "NGN": "NG",
      "NIO": "NI",
      "NPR": "NP",
      "NZD": "NZ",
      "OMR": "OM",
      "PAB": "PA",
      "PEN": "PE",
      "PGK": "PG",
      "PHP": "PH",
      "PKR": "PK",
      "PLN": "PL",
      "PYG": "PY",
      "QAR": "QA",
      "RON": "RO",
      "RSD": "RS",
      "RUB": "RU",
      "RWF": "RW",
      "SAR": "SA",
      "SBD": "SB",
      "SCR": "SC",
      "SDG": "SD",
      "SEK": "SE",
      "SGD": "SG",
      "SKK": "SK",
      "SLL": "SL",
      "SOS": "SO",
      "SRD": "SR",
      "STD": "ST",
      "SVC": "SV",
      "SYP": "SY",
      "SZL": "SZ",
      "THB": "TH",
      "TJS": "TJ",
      "TMT": "TM",
      "TND": "TN",
      "TOP": "TO",
      "TRY": "TR",
      "TTD": "TT",
      "TWD": "TW",
      "TZS": "TZ",
      "UAH": "UA",
      "UGX": "UG",
      "USD": "US",
      "UYU": "UY",
      "UZS": "UZ",
      "VEF": "VE",
      "VND": "VN",
      "VUV": "VU",
      "YER": "YE",
      "ZAR": "ZA",
      "ZMK": "ZM",
      "ZWD": "ZW"
    };

    const primaryCurrency = document.getElementById("primary");
    const secondaryCurrency = document.getElementById("secondary");
    primaryCurrency.innerHTML = getOptions(currencies);
    secondaryCurrency.innerHTML = getOptions(currencies);


    function getOptions(data) {
      return Object.entries(data)
        .map(([country, currency]) => `<option value="${country}">${country}</option>`)
        .join("");
    }

    document.getElementById("btn-convert").addEventListener("click", fetchCurrencies);

    function fetchCurrencies() {
      const primary = primaryCurrency.value;
      const secondary = secondaryCurrency.value;
      const amount = document.getElementById("amount").value;
      const fc = document.getElementById("Claim_Amount_FC").value;
      // Important: Include your API key below
      fetch("https://v6.exchangerate-api.com/v6/10e6be3a3cbd346c984a5c01/latest/" + primary)
        .then((response) => {
          if (response.ok) {
            return response.json();
          } else {
            throw new Error("NETWORK RESPONSE ERROR");
          }
        })
        .then((data) => {
          console.log(data);
          displayCurrency(data, primary, secondary, amount);
        })
        .addEventListener("change", e => {
          loadFlag(primaryCurrency);
          loadFlag(secondaryCurrency);
        })

        .catch((error) => console.error("FETCH ERROR:", error));
    }

    function displayCurrency(data, primary, secondary, amount, fc) {
      const calculated = amount * data.conversion_rates[secondary];
      document.getElementById("txt-primary").innerText = amount + " " + primary + " = ";
      document.getElementById("txt-secondary").innerText = calculated + " " + secondary;
      document.getElementById("Claim_Amount_FC").value = calculated;
    }

    const exchangeIcon = document.querySelector("form .icon");
    exchangeIcon.addEventListener("click", () => {
      let tempCode = primaryCurrency.value;
      primaryCurrency.value = secondaryCurrency.value;
      secondaryCurrency.value = tempCode;
      loadFlag(primaryCurrency);
      loadFlag(secondaryCurrency);
      getExchangeRate();
    })

    function loadFlag(element) {
      for (let code in currencies) {
        if (code == element.value) {
          let imgTag = document.getElementById("img");
          imgTag.src = `https://flagcdn.com/48x36/${currencies[code].toLowerCase()}.png`;
        }
      }
    }
  </script>


  <!--Script for function-->
  <script>
    let sidebar = document.querySelector(".sidebar");
    let closeBtn = document.querySelector("#btn");
    let searchBtn = document.querySelector(".bx-search");

    closeBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      menuBtnChange();//calling the function(optional)
    });


    // following are the code to change sidebar button(optional)
    function menuBtnChange() {
      if (sidebar.classList.contains("open")) {
        closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");//replacing the iocns class
      } else {
        closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");//replacing the iocns class
      }
    }


  </script>
</div>

</div>
</body>

</html>